"use strict";(this.webpackChunkSituInspector=this.webpackChunkSituInspector||[]).push([[76],{76:(t,e,n)=>{n.r(e),function(){if("undefined"==typeof window)return;if(window.__situWsUpdateBridgeInstalled)return;window.__situWsUpdateBridgeInstalled=!0;let t=null,e=null,n=500,o="";function c(){try{t=new WebSocket("ws://127.0.0.1:7125/"),t.onopen=()=>{n=500},t.onmessage=t=>{try{if("pong"===JSON.parse(t.data).type)return}catch(t){}},t.onclose=()=>{i()},t.onerror=t=>{}}catch(t){i()}}function i(){e||(e=setTimeout(()=>{e=null,c(),n=Math.min(2*n,1e4)},n))}function r(e){try{const n=JSON.stringify(e);if(n===o)return;o=n,t&&t.readyState===WebSocket.OPEN&&t.send(JSON.stringify({type:"update_envelope",envelope:e}))}catch(t){}}setInterval(()=>{t&&t.readyState===WebSocket.OPEN&&t.send(JSON.stringify({type:"ping"}))},3e4),window.addEventListener("inspectorFillsUpdated",t=>{try{const{elementKey:e,envelope:n}=t.detail;n&&r(n)}catch(t){}});let u="";setInterval(function(){try{const t=localStorage.getItem("situ-edits");if(t&&t!==u){u=t;const e=JSON.parse(t);if(!e||!Array.isArray(e.editsArray))return;let n=e.editsArray.filter(t=>t&&t.key);try{window.__situMcp&&"function"==typeof window.__situMcp.generateMcpOperations&&(n=window.__situMcp.generateMcpOperations(e.editsArray))}catch(t){}r({createdAt:(new Date).toISOString(),offsetEncoding:"utf16",edits:n})}}catch(t){}},2e3),window.__situWsUpdateBridge={sendUpdate:r,connect:c},c()}()}}]);